<!DOCTYPE html>
<html>
  <head>

    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel=StyleSheet href="style.css" type="text/css">

  </head>
  <body>

    <div id="Header">
      <h1>Twittler</h1>
    </div>

    <div id='sidebar'>
      <button>Refresh</button>
    </div>

    <div class='tweetstream'>
    </div>

    <script>

      $(document).ready(function(){


        var autoRefresh = function(func){
          setInterval(function(){
            func();
          }, 500);
        };

        var allUsers = function(){
          var $tweetstream = $('div.tweetstream');
          $tweetstream.html('');

            var index = streams.home.length - 1;
            while(index >= 0){
              var tweet = streams.home[index];
              var $tweet = $('<div class="tweetbody ' + tweet.user +'"></div>');
              $tweet.append('<h4 class="username">' + tweet.user + '</h4><p>' + tweet.message + '</p><h7>' + tweet.created_at + '</h7>');
              $tweet.appendTo($tweetstream);
              index -= 1;
            }
        };

  // These next four functions need refactoring. Too much repetition.

        var onlyShawnDrost = function(){
          var $tweetstream = $('div.tweetstream');
          $tweetstream.html('');

          var index = streams.users.shawndrost.length - 1;
          while(index >= 0){
            var tweet = streams.users.shawndrost[index];
            var $tweet = $('<div class="tweetbody ' + tweet.user +'"></div>');
            $tweet.append('<h4 class="username">' + tweet.user + '</h4><p>' + tweet.message + '</p><h7>' + tweet.created_at + '</h7>');
          $tweet.appendTo($tweetstream);
          index -= 1;
        }
       };

        var onlySharksForCheap = function(){
          var $tweetstream = $('div.tweetstream');
          $tweetstream.html('');

            var index = streams.users.sharksforcheap.length - 1;
            while(index >= 0){
              var tweet = streams.users.sharksforcheap[index];
              var $tweet = $('<div class="tweetbody ' + tweet.user +'"></div>');
              $tweet.append('<h4 class="username">' + tweet.user + '</h4><p>' + tweet.message + '</p><h7>' + tweet.created_at + '</h7>');
            $tweet.appendTo($tweetstream);
            index -= 1;
          }
         };

        var onlyMracus = function(){
          var $tweetstream = $('div.tweetstream');
          $tweetstream.html('');

            var index = streams.users.mracus.length - 1;
            while(index >= 0){
              var tweet = streams.users.mracus[index];
              var $tweet = $('<div class="tweetbody ' + tweet.user +'"></div>');
              $tweet.append('<h4 class="username">' + tweet.user + '</h4><p>' + tweet.message + '</p><h7>' + tweet.created_at + '</h7>');
            $tweet.appendTo($tweetstream);
            index -= 1;
          }
         };

        var onlyDouglasCalhoun = function(){
          var $tweetstream = $('div.tweetstream');
          $tweetstream.html('');

            var index = streams.users.douglascalhoun.length - 1;
            while(index >= 0){
              var tweet = streams.users.douglascalhoun[index];
              var $tweet = $('<div class="tweetbody ' + tweet.user +'"></div>');
              $tweet.append('<h4 class="username">' + tweet.user + '</h4><p>' + tweet.message + '</p><h7>' + tweet.created_at + '</h7>');
            $tweet.appendTo($tweetstream);
            index -= 1;
          }
        };
        
        // Load all tweets from all users on pageload

        allUsers();

        // On-click action for returning to all-users view/refreshing stream

        $('button').on('click', function () {
          $('.tweetbody').remove();
          allUsers();
        });

        // On-click actions for filtering by username. Needs refactoring to use something like $(this). Not sure how to do that yet. :)

        $('.shawndrost').on('click', function () {
          $('.tweetbody').remove();
          onlyShawnDrost();
        });
        $('.sharksforcheap').on('click', function () {
          $('.tweetbody').remove();
          onlySharksForCheap();
        });
        $('.mracus').on('click', function () {
          $('.tweetbody').remove();
          onlyMracus();
        });
        $('.douglascalhoun').on('click', function () {
          $('.tweetbody').remove();
          onlyDouglasCalhoun();
        });
      
      });

    </script>
  </body>
</html>
